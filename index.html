<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="skeleton.css">
  <link rel="stylesheet" href="normalize.css">
  <title>Branch Name</title>
  <style>
    input[type="text"] {
      width: 100%;
      max-width: 542px;
    }
    .mt-1 {
      margin-top: 16px;
    }
    .mb-1 {
      margin-bottom: 16px;
    }
    .mr-1 {
      margin-right: 8px;
    }
    .m-0 {
      margin: 0;
    }
    .field {
      display: flex;
      align-items: center;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1 style="display: flex; align-items: center">Название ветки для тикетов ODIN
      <svg style="margin-left: 8px;" data-v-1ceb2d1d="" version="1.0" xmlns="http://www.w3.org/2000/svg" width="34" height="34" fill="#3D62F5" viewBox="0 0 667 670" class="logo-icon"><path data-v-1ceb2d1d="" d="M639 27.2c-5.6 4.9-19.4 13.7-27.3 17.3-21.8 10-48.7 13.9-81.2 11.6-21-1.5-20.2-1.3-21-6.9-.3-2.6-.9-5.7-1.2-6.9l-.5-2.3-4.3 2.5c-2.3 1.4-7.4 3.6-11.3 4.9-6.9 2.4-10.4 3-39.9 7.5-37.6 5.8-64.7 22.3-80.8 49.3-28.2 47.5-9.2 108.1 39.2 124.9 15.4 5.3 34.7 6.6 44.5 2.9 5.3-2 12.3-8 14.7-12.7 2.7-5.2.1-11.1-6.7-15.4-9-5.7-17.9-3-21.8 6.6-1.1 2.5-2.4 4.5-3 4.5-3.1 0-19.5-5.5-24.9-8.3-17.7-9.3-29.4-30-29.5-52.1 0-16.7 6.4-30.9 20.5-45.1 6.9-7 10.8-10 17-13.2 20.2-10.4 37.6-12.6 112-14.3 42.6-.9 51.2-1.9 66.5-7.2 20-7 32.7-18.2 39.3-34.8 2.2-5.7 4.6-16.1 3.6-16-.2.1-2 1.5-3.9 3.2z"></path><path data-v-1ceb2d1d="" d="M383 33.1c-77.4 4.8-140.3 24.4-183.2 57.1-23.1 17.5-42.4 40.8-54.7 66.3-4.5 9.3-10.5 24.5-9.7 24.5.2 0 3.2-.9 6.7-2 9.7-2.9 26.8-6.8 42.9-9.7 12.9-2.4 17.3-2.7 40.6-2.9 14.4-.1 26.7-.5 27.3-.8 1.7-1.1 5.6-9.4 7.6-16 4.6-16.3 15.5-29 33-38.6 12.1-6.7 15.3-9.3 20.3-17.3 7.6-12 14.3-16.5 29.2-19.7 11.1-2.4 12.9-3.3 23.2-12.1 4.5-4 9.6-7.8 11.3-8.5 5.5-2.3 18.5-5.2 46-10.4 30.6-5.7 42.5-8.9 38.5-10.1-3.4-1-62.1-.8-79 .2zm258.6 39.7c-2.9 3.4-16.9 10.1-25.3 12.3-4.3 1.1-18.6 3.1-31.8 4.5-37 3.7-49.1 6.6-62.3 15.1-5.6 3.5-23.4 18.4-22.8 19 .1.1 5.3-1.3 11.6-3.2 23.6-7.1 45.2-10.2 62.8-9 5.6.4 10.4 1.1 10.7 1.5.3.5-2.7 3.3-6.6 6.3l-7 5.5 6.7.7c13.1 1.5 30.1-2.5 42-9.6 6.5-4 14.9-12.5 18.7-18.9 3.4-5.8 5.9-15.7 5.5-21.6-.3-4.6-.3-4.6-2.2-2.6zM473 101c-34.6 5.9-40.6 7.2-48.3 11.1-7.4 3.8-15.6 11.8-19.2 18.8l-2.6 5.3 5.3-2.9c12.1-6.6 25.3-10.5 41.3-12.3 14-1.5 13.4-1.7 12.8 3.1l-.6 4.2 3.9-.7c6.8-1.2 20-8.3 25.8-13.9 6.3-6.2 13.6-17.9 10.9-17.6-.5 0-13.6 2.3-29.3 4.9zm47.5 41.9c-13.5 2.3-24.4 7.4-32 15.1-2.7 2.7-4.7 5.1-4.4 5.3.2.2 6.4-.6 13.8-1.9 17.6-2.9 31.6-3.8 42.5-2.5 4.9.6 9.1 1.3 9.5 1.6.3.4-2.4 3.3-5.9 6.5-3.6 3.3-6.1 5.9-5.7 6 .5 0 4 .5 7.8 1.1 21.7 3.3 51.2-8.9 63.7-26.5l3.3-4.6h-17.8c-9.8 0-29.5-.2-43.8-.5-14.3-.2-28.2 0-31 .4zm-48 8.2c-1.6.5-9.7 2-18 3.4-18.9 3.1-25.3 4.8-33.3 8.7-6.6 3.3-18.6 13.7-16.6 14.5.6.2 6-1.3 12-3.3 13.3-4.4 20.7-4.5 27-.3 3.6 2.4 4.3 2.5 7.9 1.4 2.2-.6 5.4-1.9 7-2.7 3.7-2 11.7-10.3 13.9-14.6 1.7-3.2 3.7-8.3 3.3-8.1-.1 0-1.5.5-3.2 1zm26.7 33c-7.9 1-16.3 3.4-22.1 6.3l-4.4 2.3 12.3.6c6.8.4 17.6.7 24.2.7 13.1 0 12.8-.2 10.3 7l-1.5 4.2 4.3-.7c9.2-1.4 18.1-7.6 22.1-15.4l1.5-2.9-6.2-.6c-10.6-1.1-30.1-2.6-32.2-2.5-1.1.1-4.8.5-8.3 1zm-289.2 8c-25.4 2.2-44.6 5.7-51.9 9.4-7.1 3.5-9.6 7.5-9.5 15 0 6.7 2.5 12.5 9.7 22.7l4 5.7 5.2-4.7c2.9-2.6 8.1-6.2 11.8-8 11.6-5.8 19.4-7.2 55.4-10.2 7.2-.6 15.8-1.7 19.2-2.4 7.2-1.5 7.4-1.1 4.1 7.6-1.1 2.8-1.8 5.3-1.7 5.5.2.1 6.8.7 14.8 1.3 41.7 3 63.5 8.2 91 22 5.6 2.8 9.9 5.3 9.7 5.5-.2.3-2.9 0-6-.5-10.6-1.7-29.1-2.2-37.3-1.1-16 2.2-25.8 7.4-34.2 18.1-9.2 11.7-16.7 19.1-21.5 21.6-6.3 3.2-17.7 5.4-27.6 5.4-6.9 0-26.3-2.5-37.9-4.9-2.6-.5-4.3-.5-4.3.1 0 2.1 20.3 20.9 28.6 26.5 5.1 3.3 9.8 6.3 10.5 6.5 3.4 1.1-8.8 12.4-16.2 15-1.6.6-2.8 1.2-2.6 1.4.2.3 9.4 2.2 20.5 4.4 38.8 7.7 53.5 13.5 73.9 28.9 7.7 5.8 18.4 16.4 25.4 25l3.5 4.5 1.7-10c3.6-22 11.6-42 24.3-61.1 6.2-9.5 10.9-15 24.4-28.4 18.4-18.3 20-20.8 20-32 0-5.7-4.3-22-5.8-21.8-.4 0-2.4 3.5-4.4 7.7-4.2 8.7-12.2 20.1-24.6 34.7-9.1 10.9-34.3 38.5-35 38.5-.2 0 .2-1 1-2.3 34.1-52.8 44-93.9 26.6-110.3-8.1-7.7-40.4-20.9-69.3-28.4-26.8-6.9-64.3-9.6-95.5-6.9z"></path><path data-v-1ceb2d1d="" d="M159.9 267.6c-24.3 39-29.8 49.8-30.7 60.1-.8 10.8 3.3 15.5 15.8 18.3 7.1 1.5 35.1 2.4 36.9 1.2 2-1.4.6-5.8-2.8-9.3-3.9-3.9-8.6-4.5-21-2.6-5.8.9-10.9 1.3-11.3.9-.9-.9 2.3-7.1 9.6-19.2 15.1-24.6 18.7-34 19.3-49.5.2-6.9-.1-13-.9-16.4l-1.3-5.4-13.6 21.9zm286.9 13c-18.1 36.4-30.4 65.5-35.2 83.4-7.4 27.5-7.6 59.6-.6 87.1 7.9 30.9 25.1 64.2 50.2 97.1 9.8 12.8 12 15.1 9 9.2-7.7-15.1-18.3-44.4-22.3-61.2-12.1-51.7-9.7-122.9 7.4-218.7 1.9-10.5 3.3-19.2 3.1-19.4-.1-.2-5.4 10-11.6 22.5zm-56.3 94.1c-14.8 32.8-25.8 62.8-29.2 79.8-2.5 12.7-2.5 40.7 0 52.5 5.7 26.8 19 53.7 37.8 76.5 6.2 7.6 17.9 19.4 17.9 18.2 0-.5-3.2-8.6-7.1-18-13.7-32.9-19.1-50.5-22.6-72.7-1.4-9.2-1.8-17.3-1.7-41 0-32.4 1.3-45.8 7.8-86.5 1.9-11.6 3.3-21.1 3.1-21.3-.1-.1-2.8 5.5-6 12.5zm-248.1-8.2c-9.7 3-17.1 9-21.2 16.9-3.5 7-3.7 16.1-.3 22.9 3.8 7.7 4.8 8.1 26 8.9 22.6.9 50 3.4 59.5 5.4 11.4 2.4 24.3 7.1 38.4 14 10.3 5.1 14.8 8 19.9 12.7 12.3 11.5 16.4 20 25.8 53.3 8.7 30.8 14.8 44.6 28.6 64.9 6.8 10 21 26.6 26.2 30.5 3.4 2.7 3.4 3.4.2-17.8-7.8-51.7-20.1-95.6-34.9-124.9-8.5-16.9-22.5-34.3-33-40.9-2.5-1.6-4.6-3.3-4.6-3.7 0-.4 2.2-.5 5-.1 2.7.4 12.4.3 21.5-.1l16.6-.7-13.8-7.5c-37.7-20.6-65.7-29.3-108-33.8-17-1.8-46.2-1.8-51.9 0z"></path><path data-v-1ceb2d1d="" d="M164.5 436.6c-4.9 23.6-14.4 43-29 59.1-5.3 5.8-11.3 11-11.9 10.2-.1-.2.3-13.9.9-30.4.6-16.5 1.1-30.1 1.1-30.2-.1-.1-3.7 8-8 18-35.4 81.4-58.1 126.8-84.1 167.8-5.3 8.3-9.4 15.3-9.1 15.6.6.7 28.1-1.6 39.1-3.3 23.5-3.6 47.5-10.9 66.3-20.1 17-8.3 29.3-17.3 44-32 7.3-7.3 13.4-13.3 13.6-13.3.1 0 5.8 7.2 12.5 16 6.8 8.8 12.6 16 13 16 2 0 20.2-36.2 27.4-54.5 9.6-24.3 13.7-41.7 13.7-57.4-.1-28.4-14.5-49.1-40.6-58.2-10.4-3.6-19.5-5.1-34.1-5.6l-14.2-.6-.6 2.9z"></path></svg>
    </h1>
    <form class="generate-form">
      <label for="task-name">Название тикета из Tracker <img style="margin-bottom: -5px;" width="20" height="20" src="https://www.ph4.ru/DL/LOGO/y/ya_tracker_.gif" alt=""></label>
      <input type="text" id="task-name">
      <div class="mt-1 mb-1">
        <button type="button" id="copy-name">
          Скопировать название тикета
        </button>
      </div>
      <label for="branch-name">Название ветки</label>
      <input type="text" id="branch-name" value="ODIN" />
      <div class="field mt-1">
        <input checked class="mr-1" type="radio" name="sep" value="-" id="dash"><label class="m-0" for="dash">Разделять слова с помощью -</label>
      </div>
      <div class="field mt-1">
        <input class="mr-1" type="radio" name="sep" value="_" id="underscore"><label class="m-0" for="underscore">Разделять слова с помощью _</label>
      </div>
    </form>
    <button id="copy">
      Скопировать
    </button>
    <button id="copy-git">
      Скопировать с git-командами
    </button>
    <button id="refresh">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" height="16" width="16"><path d="M24 40q-6.65 0-11.325-4.675Q8 30.65 8 24q0-6.65 4.675-11.325Q17.35 8 24 8q4.25 0 7.45 1.725T37 14.45V8h3v12.7H27.3v-3h8.4q-1.9-3-4.85-4.85Q27.9 11 24 11q-5.45 0-9.225 3.775Q11 18.55 11 24q0 5.45 3.775 9.225Q18.55 37 24 37q4.15 0 7.6-2.375 3.45-2.375 4.8-6.275h3.1q-1.45 5.25-5.75 8.45Q29.45 40 24 40Z"/></svg>
    </button>
  </div>
  <script>
    let sep = '-';
    function getBranch(el) {
      // ODIN-8856: В шаблоне дисциплины не работает кнопка "открепить" для шаблона активности
      const ticketNumberRegExp = /[A-Z]+-[0-9]+/;
      const ticketNumber = el.match(ticketNumberRegExp)[0];
      const ticketName = el.replace(ticketNumberRegExp, '');
      const cleared = ticketName.replace(/[^A-Za-zА-Яа-я0-9]/g, ' ');
      if (cleared.slice(-1) === ' ') {
        return ticketNumber + cleared.slice(0, -1).replace(/ +/g, sep);
      }
      return ticketNumber + cleared.replace(/ +/g, sep)
    }
    document.addEventListener("DOMContentLoaded", () => {
      document.querySelectorAll('#dash,#underscore').forEach((el) => {
        el.addEventListener('input', () => {
          sep = el.value;
          onChange();
        });
      });
      const taskNameInput = document.getElementById("task-name");
      const valueOutput = document.getElementById("branch-name");
      const btn = document.getElementById("copy");
      const btnGit = document.getElementById("copy-git");
      const btnName = document.getElementById("copy-name");
      const refresh = document.getElementById("refresh");
      const onRefresh = () => {
        btn.classList.remove('button-primary');
        btnGit.classList.remove('button-primary');
        btnName.classList.remove('button-primary');
        btnName.textContent = 'Скопировать название тикета';
        btn.textContent = 'Скопировать'
        btnGit.textContent = 'Скопировать с git-командами'
        navigator.clipboard.writeText('');
      }
      const onChange = () => {
        valueOutput.value = getBranch(taskNameInput.value);
        onRefresh();
      }
      const copyInputValue = (input) => {
        input.select();
        input.setSelectionRange(0, 99999); /* For mobile devices */
        navigator.clipboard.writeText(input.value);
      }
      taskNameInput.addEventListener('input', onChange);
      btnName.addEventListener('click', () => {
        copyInputValue(taskNameInput);
        btnName.textContent = 'Название тикета скопировано';
        btnName.classList = 'button-primary';
      })
      btn.addEventListener('click', () => {
        copyInputValue(valueOutput);
        btn.textContent = 'Скопировано';
        btn.classList = 'button-primary';
      })
      btnGit.addEventListener('click', () => {
        navigator.clipboard.writeText('git checkout master && git pull && git checkout -b ' + valueOutput.value);
        btnGit.textContent = 'Скопировано';
        btnGit.classList = 'button-primary';
      })
      refresh.addEventListener('click', onRefresh)
    })
  </script>
</body>
</html>